# Kerykeion Calculation Engine
Astro Engine is an open-source astrological calculation service built on top of
[Kerykeion](https://pypi.org/project/kerykeion/) and Swiss Ephemeris.

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤. –Ø–≤–ª—è–µ—Ç—Å—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–º —è–¥—Ä–æ–º –ø—Ä–æ–µ–∫—Ç–∞ **Astro Guido**.
–°–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å —ç—Ñ–µ–º–µ—Ä–∏–¥–∞–º–∏ (Swiss Ephemeris) –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π `kerykeion`.

> **–í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π GPL (–∏–∑-–∑–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `pyswisseph`) –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∫–æ–¥–∞ (API) —á–µ—Ä–µ–∑ —Å–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTP API –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤:
1. **–ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞** (–ü–ª–∞–Ω–µ—Ç—ã, –î–æ–º–∞, –ê—Å–ø–µ–∫—Ç—ã).
2. **–¢—Ä–∞–Ω–∑–∏—Ç—ã** (–í–ª–∏—è–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç).
3. **–°–∏–Ω–∞—Å—Ç—Ä–∏—è** (–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–≤—É—Ö –ª—é–¥–µ–π).
4. **–•–æ—Ä–∞—Ä** (–û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è).

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ó–∞–ø—É—Å–∫

### –ß–µ—Ä–µ–∑ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–µ—Ä–≤–∏—Å —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã –∏ –æ–±—ã—á–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ–±—â–∏–π `docker-compose.yml`:

```yaml
kerykeion:
  build: ./apps/kerykeion_server
  environment:
    - INTERNAL_API_KEY=your_secret_key
  ports:
    - "8001:8000"

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
cd apps/kerykeion_server
pip install -r requirements.txt

```


2. **–ó–∞–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
# Linux/Mac
export INTERNAL_API_KEY=my_secret_key

# Windows PowerShell
$env:INTERNAL_API_KEY="my_secret_key"

```


3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
uvicorn main:app --reload --port 8001

```



## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã. –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –æ–±—è–∑–∞–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫:
`X-API-Key: <–∑–Ω–∞—á–µ–Ω–∏–µ INTERNAL_API_KEY>`

–ï—Å–ª–∏ –∫–ª—é—á –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Å–µ—Ä–≤–∏—Å –≤–µ—Ä–Ω–µ—Ç `401 Unauthorized`.

## üìö API Endpoints

### 1. –ù–∞—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞

**POST** `/natal`

```json
{
  "name": "User",
  "date": "1990-05-03",
  "time": "15:20:00",
  "tz": "+03:00",
  "lat": 55.75,
  "lon": 37.61
}

```

### 2. –¢—Ä–∞–Ω–∑–∏—Ç—ã (–ü—Ä–æ–≥–Ω–æ–∑)

**POST** `/predict/daily`

```json
{
  "name": "User",
  "date": "1990-05-03",
  "time": "15:20:00",
  "tz": "+03:00",
  "lat": 55.75,
  "lon": 37.61,
  "target_date": "2025-12-30"
}

```

### 3. –•–æ—Ä–∞—Ä (–í–æ–ø—Ä–æ—Å)

**POST** `/horary`

> **–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:** –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è –≤ UTC (`dt_utc`).

```json
{
  "question": "–°—Ç–æ–∏—Ç –ª–∏ –ø–æ–∫—É–ø–∞—Ç—å –º–∞—à–∏–Ω—É?",
  "lat": 55.75,
  "lon": 37.61,
  "dt_utc": "2025-12-29T10:00:00Z"
}

```

### 4. –°–∏–Ω–∞—Å—Ç—Ä–∏—è (–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

**POST** `/synastry`

```json
{
  "p1": { ...natal_object... },
  "p2": { ...natal_object... }
}


## License

This project is licensed under the GNU Affero General Public License v3.0 (AGPL-3.0).

It uses the Kerykeion library, which is also licensed under AGPL-3.0.
